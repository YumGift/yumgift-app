<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mini Donas & Teque√±os</title>
<style>
  body { font-family: Arial; margin: 20px; }
  header { display: flex; justify-content: flex-end; margin-bottom: 20px; }
  #carritoBtn { background: none; border: none; font-size: 20px; cursor: pointer; }

  .producto { 
    border: 1px solid #ddd; 
    padding: 15px; 
    border-radius: 8px;
    margin-bottom: 12px;
  }

  .qty-container { display: flex; align-items: center; margin-top: 8px; }
  .qty-btn { padding: 5px 10px; cursor: pointer; }
  .qty { width: 40px; text-align: center; margin: 0 5px; }
</style>
</head>
<body>

<header>
  <button id="carritoBtn">üõí $0</button>
</header>

<h2>Mini Donas cl√°sicas</h2>
<div class="producto">
  <p>Mini donas cl√°sicas</p>
  <p><strong>$6000</strong></p>
  <div class="qty-container">
    <button class="qty-btn">-</button>
    <input type="number" class="qty" value="0" data-nombre="Mini Donas Cl√°sicas" data-precio="6000">
    <button class="qty-btn">+</button>
  </div>
</div>

<h2>Teque√±os</h2>
<div class="producto">
  <p>Teque√±os</p>
  <p><strong>$8500</strong></p>
  <div class="qty-container">
    <button class="qty-btn">-</button>
    <input type="number" class="qty" value="0" data-nombre="Teque√±os" data-precio="8500">
    <button class="qty-btn">+</button>
  </div>
</div>

<br>
<label>Nombre:</label><br>
<input type="text" id="clienteNombre"><br><br>

<label>Tel√©fono:</label><br>
<input type="text" id="clienteTelefono"><br><br>

<button id="whatsapp">Enviar pedido por WhatsApp</button>

<script>
function guardarCarrito(){
  let carrito = [];
  document.querySelectorAll('.qty').forEach(input => {
    const cantidad = Number(input.value);
    if (cantidad > 0) {
      carrito.push({
        nombre: input.dataset.nombre,
        precio: Number(input.dataset.precio),
        cantidad: cantidad
      });
    }
  });
  localStorage.setItem("carritoYumgifts", JSON.stringify(carrito));
  actualizarCarritoBtn();
}

function actualizarCarritoBtn(){
  const carrito = JSON.parse(localStorage.getItem("carritoYumgifts")) || [];
  const total = carrito.reduce((s,i)=>s+(i.precio*i.cantidad),0);
  document.getElementById('carritoBtn').innerText = `üõí $${total}`;
}

document.querySelectorAll('.qty-container').forEach(c=>{
  const input=c.querySelector('.qty');
  const btns=c.querySelectorAll('.qty-btn');
  btns[0].addEventListener('click',()=>{ if(input.value>0){ input.value--; guardarCarrito(); }});
  btns[1].addEventListener('click',()=>{ input.value++; guardarCarrito(); });
  input.addEventListener('input', guardarCarrito);
});

document.getElementById('whatsapp').addEventListener('click', () => {
  const carrito = JSON.parse(localStorage.getItem("carritoYumgifts")) || [];
  if (carrito.length === 0){ alert("Agrega productos"); return; }

  const nombre=document.getElementById('clienteNombre').value.trim();
  const telefono=document.getElementById('clienteTelefono').value.trim();
  if(!nombre || !telefono){ alert("Ingresa nombre y tel√©fono"); return; }

  let total = carrito.reduce((s,i)=>s+i.precio*i.cantidad,0);
  let productos = carrito.map(i=>`${i.nombre}: ${i.cantidad}`).join("\n");

  let mensaje =
`¬°Hola! Te paso mi pedido:

Nombre: ${nombre}
Tel√©fono: ${telefono}

Mi pedido:
${productos}

TOTAL: $${total}`;

  window.open(`https://wa.me/5491135936372?text=${encodeURIComponent(mensaje)}`,'_blank');
});

guardarCarrito();
</script>

</body>
</html>
